---
title: 系统总线
abbrlink: 693dcbde
date: 2019-09-07 14:47:11
categories:
    - 计算机组成原理
mathjax: true
---

# 总线的基本概念

计算机系统的五大部件之间的互连方式有两种，一种是各部件之间使用单独的连线，称为**分散连接**；另一种是将各部件连到一组公共信息传输线上，称为**总线连接**。

早期的计算机大多用分散连接方式。在以运算器为中心的结构中，内部连线十分复杂，尤其是当 I/O 与存储器交换信息时，都需要经过运算器，致使运算器停止运算，严重影响了 CPU 的工作效率。后来，虽然改进为以存储器为中心的结构，I/O 与存储器交换信息可以不经过运算器，又采用了中断、DMA 等技术，使 CPU 工作效率得到很大的提高，但是仍无法解决 I/O 设备与主机之间连接的灵活性。随着计算机应用领域的不断扩大， I/O 设备的种类和数量也越来越多，人们希望随时增添或减撤设备，用分散连接方式简直是一筹莫展，由此出现了总线连接方式。

总线是连接多个部件的信息传输线，是各部件共享的传输介质。当多个部件与总线相连时，如果出现两个或两个以上部件同时向总线发送信息，势必导致信号冲突，传输无效。因此，在某一时刻，只允许有一个部件向总线发送信息，而多个部件可以同时从总线上接收相同的信息。

# 总线的分类

## 片内总线

{% note info %}
片内总线是指芯片内部的总线，如在 CPU 芯片内部，寄存器与寄存器之间、寄存器与算术逻辑单元 ALU 之间都是由片内总线连接。
{% endnote %}

## 系统总线

系统总线是指 CPU、主存、I/O 设备各大部件之间的信息传输线。由于这些部件通常都安放在主板和各个插件板上，故又称板级总线或板间总线。

{% note info %}
- **数据总线**：用来传输各功能部件之间的数据信息，它是双向传输总线，其位数与机器字长、存储字长有关，一般位 8 位、16 位或 32 位。数据总线的位数称为**数据总线宽度**，它是衡量系统性能的一个重要参数。如果数据总线的宽度为 8 位，指令字长为 16 位，那么 CPU 在取指阶段必须两次访问主存。
- **地址总线**：用来指出数据总线上的源数据或目的数据在主存单元的地址或 I/O 设备的地址。如地址总线为 20 根，则对应的存储单元个数为 $2^{20}$。
- **控制总线**：由于数据总线、地址总线都是被挂在总线上的所有部件共享的，如何使各部件能在不同时刻占有总线使用权，需依靠控制总线来完成，因此控制总线是用来发出各种控制信号的传输线。通常对任一控制线而言，它的传输是单向的。例如，存储器读/写命令或 I/O 设备读/写命令都是由 CPU 发出的。但对于控制总线总体来说，又可认为是双向的。例如，当某设备准备就绪时，便向 CPU 发中断请求；当某部件需获得总线使用权时，也向 CPU 发出总线请求。此外，控制总线还起到监视各部件状态的作用。例如，查询该设备是出于“忙”还是“闲”，是否出错等。因此对 CPU 而言，控制信号既有输出，又有输入。
{% endnote %}

## 通信总线

这类总线用于计算机系统之间或计算机系统与其他系统之间的通信。由于这类联系涉及许多方面，如外部链接、距离远近、速度快慢、工作方式等，差别极大，因此通信总线的类别很多。但按传输方式可分为两种：

{% note info %}
- **串行通信**：数据在单条 1 位宽的传输线上，一位一位地按顺序分时传送。
- **并行通信**：数据在多条并行 1 位宽的传输线上，同时由源传送到目的地。
{% endnote %}

# 总线结构

## 单总线结构

![单总线结构](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E5%8D%95%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.png)

单总线结构是将 CPU、主存、I/O 设备都挂在一组总线上，允许 I/O 设备之间、I/O 设备与 CPU 之间或 I/O 设备与主存之间直接交换信息。这种结构简单，也便于扩充，但所有的传送都通过这组共享总线，因此极易形成计算机系统的瓶颈。它也不允许两个以上的部件在同一时刻向总线传输信息，这就必然会影响系统工作效率的提高。

## 多总线结构

略，不一一介绍了。

# 总线判优控制


# 总线通信控制

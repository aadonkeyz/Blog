---
title: 第十三章 用模块封装代码
categories:
  - JavaScript
  - 《深入理解ES6》
abbrlink: 588c1481
date: 2019-04-17 16:05:23
---

# 何为模块？

{% note info %}
模块是使用不同方式加载的JS文件（与JS原先的脚本加载方式相对）。这种不同模式很有必要，因为它与脚本有大大不同的语义：
- 模块代码自动运行在严格模式下，并且没有任何办法跳出严格模式；
- 在模块的顶级作用域创建的变量，不会被自动添加到共享的全局作用域，它们只会在模块顶级作用域内部存在；
- 模块顶级作用域的`this`值为`undefined`；
- 模块不允许在代码中使用HTML风格的注释；
- 对于需要让模块外部代码访问的内容，模块必须导出它们；
- 允许模块从其他模块导入绑定。
{% endnote %}

CommonJs是在ES6之前的模块规范，至今仍然被广泛使用。[**点击这里了解CommonJs**](https://aadonkeyz.com/posts/b3fe2fad/)！

# 导出

ES6的导出有两种形式：命名导出和默认导出。

## 命名导出

你可以将`export`放置在任意变量、函数或类声明之前，从模块中将它们公开出去，就像这样：

```js
export var color = 'red'

export let name = 'Nicholas'

export const magicNumber = 7

export function sum(num1, num2) {
    return num1 + num1
}

export class Rectangle {
    constructor (length, width) {
        this.length = length
        this.width = width
    }
}
```

你同样可以在变量、函数或类定义完成后再导出它们，不过这个时候需要：

```js
function multiply (num1, num2) {
    return num1 * num2
}

export { multiply }
```

# 默认导出

# 导入
## 导入单个绑定
## 导入多个绑定
## 完全导入一个模块
## 导入绑定的一个微妙怪异点

# 重命名导出与导入

# 模块的默认值
## 导出默认值
## 导入默认值

# 绑定的在导出

# 无绑定的导入

# 加载模块
## 在Web浏览器中使用模块
### 在script标签中使用模块
### Web浏览器中的模块加载次序
### Web浏览器中的异步模块加载
### 将模块作为Worker加载
## 浏览器模块说明符方案
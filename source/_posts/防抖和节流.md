---
title: 防抖和节流
categories:
    - 前端
abbrlink: 45b9746d
date: 2019-07-07 13:55:07
---

在某些场景下（scroll、resize事件等），函数有可能被非常频繁地调用，这样会消耗不必要的性能。为了解决这个问题，引出了**函数防抖**和**函数节流**的概念。

# 函数防抖

{% note info %}
**在事件被触发时，设定n秒后执行对应的回调函数。如果在n秒之内事件被重复触发，则重新计时。如果连续触发事件，对应的回调函数可能永远不会被调用。**
{% endnote %}

```js
function debounce (fn, timeRange) {
    var timer

    return function (...args) {
        clearTimeout(timer)

        timer = setTimeout(() => {
            fn.call(this, ...args)
        }, timeRange)
    }
}
```

# 函数节流

{% note info %}
**一段时间周期内，最多只执行一次回调函数。**
{% endnote %}

```js
function throttle (fn, timeRange) {
    var timer

    return function (...args) {
        if (timer) {
            return
        } else {
            timer = setTimeout(() => {
                clearTimeout(timer)

                timer = null
                fn.call(this, ...args)
            }, timeRange)
        }
    }
}
```

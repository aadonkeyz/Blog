---
title: 页面加载外部资源
categories:
    - 前端
abbrlink: 7fca0ecb
date: 2019-06-27 21:41:06
---

# script标签

在用`<script>`加载外部js文件时，只要不存在`defer`和`async`属性，浏览器会按照`<script>`标签在页面中出现的先后顺序对它们依次进行解析。所以如果将`<script>`放在`<head>`中，意味着必须等到全部JavaScript代码都被加载、解析和执行完成以后，才能开始呈现页面的内容（浏览器在遇到`<body>`标签时才开始呈现内容）。

如果使用在`<script>`时加入`defer`属性，意味着要立即加载这个js文件，但是会延迟到整个页面都被解析完成之后，才开始解析、执行这个js文件。

如果使用在`<script>`时加入`async`属性，意味着要异步加载脚本，请看下面的例子：

```html
<script src="outside1.js" async></script>
<script src="outside2.js" async></script>
```

浏览器看到上面两个标签时会立即并行加载outside1.js和outside2.js文件，在加载的过程中会同时解析文档中的其他内容。如果在接下来的解析过程中，outside2.js文件加载完成了，那么浏览器会暂时停止文档的解析，转而去加载outside2.js文件。因此也可以看出，浏览器解析这两个外部js文件的顺序是不固定的。

# link标签

当`<link>`标签的`rel`属性值为`stylesheet`或`icon`时，会等到将对应内容解析完之后，才会解析后续的文档内容。

但是当`rel`属性值为`preload`时，意味着要浏览器立即加载对应的外部资源，但是并不会去解析、执行它。关于它的具体用法请看[**MDN**](https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content)，下面的例子也是来源于MDN。

```html
<head>
    <meta charset="utf-8">
    <title>JS and CSS preload example</title>

    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="main.js" as="script">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>bouncing balls</h1>
    <canvas></canvas>

    <script src="main.js" defer></script>
</body>
```

# @import

通过@import方式引入的样式表，会在整个页面内容都加载完成之后才开始加载、解析。

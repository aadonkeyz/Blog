---
title: Ê†ë
categories:
    - Êï∞ÊçÆÁªìÊûÑ‰∏éÁÆóÊ≥ï
mathjax: true
abbrlink: 7b216a3b
date: 2019-06-14 23:57:31
---


# Ê†ëÁöÑÂü∫Êú¨Ê¶ÇÂøµ

‰∏ÄÊ£µÊ†ëÊòØ‰∏Ä‰∫õËäÇÁÇπÁöÑÈõÜÂêàÔºåËøô‰∏™ÈõÜÂêàÂèØ‰ª•ÊòØÁ©∫ÈõÜÔºõËã•‰∏çÊòØÁ©∫ÈõÜÔºåÂàôÊ†ëÁî±Áß∞ÂÅö**Ê†πÔºàrootÔºâ**ÁöÑËäÇÁÇπ$r$Âèä0ÊàñÂ§ö‰∏™ÈùûÁ©∫ÁöÑÔºàÂ≠êÔºâÊ†ë$T_1,T_2, ¬∑¬∑¬∑,T_k$ÁªÑÊàêÔºåËøô‰∫õÂ≠êÊ†ë‰∏≠ÊØè‰∏ÄÈ¢óÁöÑÊ†πÈÉΩË¢´Êù•Ëá™Ê†π$r$ÁöÑ‰∏ÄÊù°ÊúâÂêëÁöÑËæπÊâÄËøûÊé•„ÄÇÊØè‰∏ÄÈ¢óÂ≠êÊ†ëÁöÑÊ†πÂè´‰ΩúÊ†π$r$ÁöÑ**ÂÑøÂ≠ê**ÔºåËÄå$r$ÊòØÊØè‰∏ÄÈ¢óÂ≠êÊ†ëÁöÑÊ†πÁöÑ**Áà∂‰∫≤**

![‰∏ÄËà¨ÁöÑÊ†ë](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/%E4%B8%80%E8%88%AC%E7%9A%84%E6%A0%91.png)

‰∏ãÂõæ‰∏≠ÔºåËäÇÁÇπAÊòØÊ†π„ÄÇËäÇÁÇπFÊúâ‰∏Ä‰∏™Áà∂‰∫≤AÂπ∂‰∏îÊúâÂÑøÂ≠êK„ÄÅLÂíåM„ÄÇÊØè‰∏Ä‰∏™ËäÇÁÇπÂèØ‰ª•Êúâ‰ªªÊÑèÂ§ö‰∏™ÂÑøÂ≠êÔºå‰πüÂèØËÉΩÊòØÈõ∂‰∏™ÂÑøÂ≠ê„ÄÇÊ≤°ÊúâÂÑøÂ≠êÁöÑËäÇÁÇπÁß∞‰∏∫**Ê†ëÂè∂**Ôºå‰∏ãÂõæ‰∏≠ÁöÑÊ†ëÂè∂ÊòØB„ÄÅC„ÄÅH„ÄÅI„ÄÅP„ÄÅQ„ÄÅK„ÄÅL„ÄÅMÂíåN„ÄÇÂÖ∑ÊúâÁõ∏ÂêåÁà∂‰∫≤ÁöÑËäÇÁÇπ‰∏∫**ÂÖÑÂºü**„ÄÇÂõ†Ê≠§ÔºåK„ÄÅLÂíåMÈÉΩÊòØÂÖÑÂºü„ÄÇ

![‰∏ÄÈ¢óÊ†ë](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/%E4%B8%80%E6%A3%B5%E6%A0%91.png)

‰ªéËäÇÁÇπ$n_1$Âà∞$n_k$ÁöÑ**Ë∑ØÂæÑ**ÂÆö‰πâ‰∏∫ËäÇÁÇπ$n_1, n_2, ¬∑¬∑¬∑, n_k$ÁöÑ‰∏Ä‰∏™Â∫èÂàóÔºå‰ΩøÂæóÂØπ‰∫é$1 \leq i \leq k$ÁöÑËäÇÁÇπ$n_i$ÊòØ$n_{i + 1}$ÁöÑÁà∂‰∫≤„ÄÇËøôÊù°Ë∑ØÂæÑÁöÑÈïøÊòØËØ•Ë∑ØÂæÑ‰∏äËæπÁöÑÊù°Êï∞ÔºåÂç≥$k - 1$„ÄÇ‰ªéÊØè‰∏Ä‰∏™ËäÇÁÇπÂà∞ÂÆÉËá™Â∑±Êúâ‰∏ÄÊù°Èïø‰∏∫0ÁöÑË∑ØÂæÑ„ÄÇÊ≥®ÊÑèÔºåÂú®‰∏ÄÊ£µÊ†ë‰∏≠‰ªéÊ†πÂà∞ÊØè‰∏™ËäÇÁÇπÊÅ∞Â•ΩÂ≠òÂú®‰∏ÄÊù°Ë∑ØÂæÑ

ÂØπ‰ªªÊÑèËäÇÁÇπ$n_i$Ôºå$n_i$ÁöÑ**Ê∑±Â∫¶**‰∏∫‰ªéÊ†πÂà∞$n_i$ÁöÑÂîØ‰∏ÄË∑ØÂæÑÁöÑÈïø„ÄÇÂõ†Ê≠§ÔºåÊ†πÁöÑÊ∑±Â∫¶‰∏∫0„ÄÇËäÇÁÇπ$n_i$ÁöÑ**È´ò**ÊòØ‰ªé$n_i$Âà∞‰∏ÄÁâáÊ†ëÂè∂ÁöÑÊúÄÈïøË∑ØÂæÑÁöÑÈïø„ÄÇÂõ†Ê≠§ÊâÄÊúâÊ†ëÂè∂ÁöÑÈ´òÈÉΩÊòØ0„ÄÇ**‰∏ÄÊ£µÊ†ëÁöÑÈ´òÁ≠â‰∫éÂÆÉÁöÑÊ†πÁöÑÈ´ò**„ÄÇ‰∏äÂõæ‰∏≠ÁöÑÊ†ëÔºåEÁöÑÊ∑±Â∫¶‰∏∫1ËÄåÈ´ò‰∏∫2ÔºõFÁöÑÊ∑±Â∫¶‰∏∫1ËÄåÈ´ò‰πüÊòØ1ÔºõËØ•Ê†ëÁöÑÈ´ò‰∏∫3„ÄÇ**‰∏ÄÊ£µÊ†ëÁöÑÊ∑±Â∫¶Á≠â‰∫éÂÖ∂ÊúÄÊ∑±ÁöÑÊ†ëÂè∂ÁöÑÊ∑±Â∫¶ÔºåËØ•Ê∑±Â∫¶ÊÄªÊòØÁ≠â‰∫éËøôÊ£µÊ†ëÁöÑÈ´ò**

**‰∫åÂèâÊ†ë**ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊ†ëÔºåÂÖ∂‰∏≠ÊØè‰∏™ËäÇÁÇπÈÉΩ‰∏çËÉΩÊúâÂ§ö‰∫é‰∏§‰∏™ÁöÑÂÑøÂ≠ê

# ÂÖà„ÄÅ‰∏≠„ÄÅÂêéÂ∫èÈÅçÂéÜ

{% note info %}
- **ÂÖàÂ∫èÈÅçÂéÜ**ÔºöÈ¶ñÂÖàÂ§ÑÁêÜÂΩìÂâçËäÇÁÇπÔºåÁÑ∂ÂêéÂÜçÂ§ÑÁêÜÂÆÉÁöÑËØ∏Â≠êËäÇÁÇπ
- **‰∏≠Â∫èÈÅçÂéÜ**ÔºöËØ•ÈÅçÂéÜÊñπÂºèÊòØÈíàÂØπ‰∫é‰∫åÂèâÊ†ëÁöÑÔºåÂÆÉ‰ºöÈ¶ñÂÖàÂ§ÑÁêÜÂ∑¶Â≠êËäÇÁÇπÔºåÁÑ∂ÂêéÂ§ÑÁêÜÂΩìÂâçËäÇÁÇπÔºåÊúÄÂêéÂ§ÑÁêÜÂè≥Â≠êËäÇÁÇπ
- **ÂêéÂ∫èÈÅçÂéÜ**ÔºöÈ¶ñÂÖàÂ§ÑÁêÜÂΩìÂâçËäÇÁÇπÁöÑËØ∏Â≠êËäÇÁÇπÔºåÁÑ∂ÂêéÂÜçÂ§ÑÁêÜÂΩìÂâçËäÇÁÇπ

---
**ÂÖà„ÄÅ‰∏≠„ÄÅÂêéÊåáÁöÑÊòØÂ§ÑÁêÜËäÇÁÇπÁöÑÈ°∫Â∫èÔºåÂú®ËÆøÈóÆËäÇÁÇπÁöÑÊó∂ÂÄôÔºåÊòØÂè™Êúâ‰∏ÄÁßçÈ°∫Â∫èÁöÑ**
{% endnote %}

![ËäÇÁÇπËÆøÈóÆÈ°∫Â∫è](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/%E8%8A%82%E7%82%B9%E8%AE%BF%E9%97%AE%E9%A1%BA%E5%BA%8F.png)

ÂØπ‰∫é‰∏äÂõæ‰∏≠ÁöÑ‰∫åÂèâÊ†ëÔºåÂÆÉÁöÑÂÖà„ÄÅ‰∏≠„ÄÅÂêéÂ∫èÈÅçÂéÜ‰ª£Á†ÅÂ¶Ç‰∏ãÊâÄÁ§∫

```js
// JavaScript

let tree = {
    value: 1,
    left: {
        value: 2,
        left: {
            value: 4,
            right: {
                value: 6,
                left: {
                    value: 7
                },
                right: {
                    value: 8
                }
            }
        }
    },
    right: {
        value: 3,
        right: {
            value: 5
        }
    }
}

function preOrderTraverse (node, result = '') {
    result += node.value + '  '

    if (node.left) {
        result = preOrderTraverse(node.left, result)
    }

    if (node.right) {
        result = preOrderTraverse(node.right, result)
    }

    return result
}

function middleOrderTraverse (node, result = '') {
    if (node.left) {
        result = middleOrderTraverse(node.left, result)
    }

    result += node.value + '  '

    if (node.right) {
        result = middleOrderTraverse(node.right, result)
    }

    return result
}

function postOrderTraverse (node, result = '') {
    if (node.left) {
        result = postOrderTraverse(node.left, result)
    }

    if (node.right) {
        result = postOrderTraverse(node.right, result)
    }

    result += node.value + '  '

    return result
}

console.log('ÂÖàÂ∫èÈÅçÂéÜÔºö ' + preOrderTraverse(tree))
console.log('‰∏≠Â∫èÈÅçÂéÜÔºö ' + middleOrderTraverse(tree))
console.log('ÂêéÂ∫èÈÅçÂéÜÔºö ' + postOrderTraverse(tree))

// ÂÖàÂ∫èÈÅçÂéÜÔºö 1  2  4  6  7  8  3  5  
// ‰∏≠Â∫èÈÅçÂéÜÔºö 4  7  6  8  2  1  3  5  
// ÂêéÂ∫èÈÅçÂéÜÔºö 7  8  6  4  2  5  3  1  
```

# ‰∫åÂèâÊü•ÊâæÊ†ë

{% note info %}
‰∫åÂèâÊü•ÊâæÊ†ë‰∏éÊôÆÈÄöÁöÑ‰∫åÂèâÊ†ëÁõ∏ÊØîÔºåÊúâÂ¶Ç‰∏ãÁâπÁÇπÔºö
- ÊâÄÊúâËäÇÁÇπÂΩºÊ≠§‰∫íÂºÇÔºåÂç≥‰∏çÂ≠òÂú®Áõ∏ÂêåÁöÑËäÇÁÇπ
- ÂØπ‰∫éÊ†ë‰∏≠ÁöÑ‰ªªÊÑèËäÇÁÇπXÔºåXÁöÑÂ∑¶Â≠êÊ†ë‰∏≠ÊâÄÊúâËäÇÁÇπÈÉΩ‚ÄúÂ∞è‰∫é‚ÄùXÔºåËÄåXÂè≥Â≠êÊ†ë‰∏≠ÁöÑÊâÄÊúâËäÇÁÇπÈÉΩ‚ÄúÂ§ß‰∫é‚ÄùX
{% endnote %}

‰∏ãÈù¢ÊòØÂÆûÁé∞‰∏Ä‰∏™‰∫åÂèâÊü•ÊâæÊ†ëÁöÑ‰ª£Á†ÅÔºö

{% note warning %}
‰ªé‰∫åÂèâÊü•ÊâæÊ†ë‰∏≠ÁßªÈô§ÂÖÉÁ¥†ÊòØËøôÈÉ®ÂàÜÁöÑÈöæÁÇπÔºåÈ¶ñÂÖàÂÆö‰ΩçÂà∞Ë¶ÅÁßªÈô§ÂÖÉÁ¥†ÊâÄÂú®ËäÇÁÇπÔºåÁÑ∂ÂêéËøõË°åÂ¶Ç‰∏ã3ÁßçÊìç‰ΩúÔºö
1. Â¶ÇÊûúÂΩìÂâçËäÇÁÇπ‰∏∫Ê†ëÂè∂ÔºåÈÇ£‰πàÁõ¥Êé•Âà†Èô§ËØ•Ê†ëÂè∂
2. Â¶ÇÊûúÂΩìÂâçËäÇÁÇπÊã•Êúâ‰∏Ä‰∏™Â≠êÊ†ëÔºåÈÇ£‰πàÁî®ËØ•Â≠êÊ†ëÁöÑÊ†πËäÇÁÇπÊõøÊç¢ÂΩìÂâçËäÇÁÇπ
3. Â¶ÇÊûúÂΩìÂâçËäÇÁÇπÊã•Êúâ‰∏§‰∏™Â≠êÊ†ëÔºåÈÇ£‰πàÊâæÂá∫Âè≥Â≠êÊ†ë‰∏≠ÁöÑÊúÄÂ∞èËäÇÁÇπÂπ∂ÈÄíÂΩíÁöÑÂà†Èô§ËØ•ÊúÄÂ∞èËäÇÁÇπÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∏™ÊúÄÂ∞èËäÇÁÇπÁöÑÂÄºËµãÁªôÂΩìÂâçËäÇÁÇπÁöÑÂÄºÔºà‰πüÂèØ‰ª•ÈááÁî®Áõ∏ÂèçÁöÑÊñπÂºèÔºåÂéªÂØªÊâæÂ∑¶Â≠êÊ†ë‰∏≠ÁöÑÊúÄÂ§ßËäÇÁÇπÔºâ
{% endnote %}

```js
class BinarySearchTree {
    constructor (newValue) {
        this.value = newValue
        this.left = null
        this.right = null
        this.isNode = true
    }

    static makeTree (array) {
        let tree = new BinarySearchTree(array[0])
        array.slice(1).forEach(item => {
            tree.insert(item)
        })
        return tree
    }

    insert (newNode, currentNode = this) {
        if (!newNode.isNode) {
            newNode = new BinarySearchTree(newNode)
        }

        if (newNode.value < currentNode.value) {
            if (currentNode.left)  {
                currentNode.insert(newNode, currentNode.left)
            } else {
                currentNode.left = newNode
            }
        }

        if (newNode.value > currentNode.value) {
            if (currentNode.right)  {
                currentNode.insert(newNode, currentNode.right)
            } else {
                currentNode.right = newNode
            }
        }

        if (newNode.value === currentNode.value) {
            console.log(`${newNode.value} already exists`)
        }
    }

    contains (inputValue, currentNode = this) {        
        if (inputValue < currentNode.value) {
            if (currentNode.left) {
                return currentNode.contains(inputValue, currentNode.left)
            } else {
                return false
            }
        }
        
        if (inputValue > currentNode.value) {
            if (currentNode.right) {
                return currentNode.contains(inputValue, currentNode.right)
            } else {
                return false
            }
        }

        if (inputValue === currentNode.value) {
            return true
        }
    }

    findMin (currentNode = this) {
        if (currentNode.left) {
            return currentNode.findMin(currentNode.left)
        } else {
            return currentNode.value
        }
    }

    findMax (currentNode = this) {
        if (currentNode.right) {
            return currentNode.findMin(currentNode.right)
        } else {
            return currentNode.value
        }
    }

    // preNodeÂíåwhereÂèÇÊï∞ÂÆåÂÖ®ÊòØ‰∏∫‰∫ÜÂà†Èô§Ê†ëÂè∂ÂáÜÂ§áÁöÑ
    remove (inputValue, currentNode = this, preNode = null, where = '') {
        if (inputValue < currentNode.value) {
            if (currentNode.left) {
                currentNode.remove(inputValue, currentNode.left, currentNode, 'left')
            } else {
                console.log(`${inputValue} does not exist`)
            }
        }
        
        if (inputValue > currentNode.value) {
            if (currentNode.right) {
                currentNode.remove(inputValue, currentNode.right, currentNode, 'right')
            } else {
                console.log(`${inputValue} does not exist`)
            }
        }

        if (inputValue === currentNode.value) {
            if ((!currentNode.left) && (!currentNode.right)) {
                preNode[where] = null
                return
            }

            if (!currentNode.left) {
                currentNode = currentNode.right
                return
            } else if (!currentNode.right) {
                currentNode = currentNode.left
                return
            }

            if (currentNode.left && currentNode.right) {
                let minValue = currentNode.right.findMin()
                currentNode.remove(minValue, currentNode.right, currentNode, 'right')
                currentNode.value = minValue
                return
            }
        }
    }
}

let array = [6, 2, 8, 7, 1, 4, 3, 5],
    tree = BinarySearchTree.makeTree(array)

function preOrderTraverse (node, result = '') {
    result += node.value + '  '

    if (node.left) {
        result = preOrderTraverse(node.left, result)
    }

    if (node.right) {
        result = preOrderTraverse(node.right, result)
    }

    return result
}

console.log(preOrderTraverse(tree))     // 6  2  1  4  3  5  8  7  

tree.remove(4)
console.log(preOrderTraverse(tree))     // 6  2  1  5  3  8  7  

tree.insert(4)
console.log(preOrderTraverse(tree))     // 6  2  1  5  3  4  8  7 

tree.remove(41)                         // 41 does not exist
console.log(preOrderTraverse(tree))     // 6  2  1  5  3  4  8  7  
```

# AVLÊ†ë

{% note info %}
- AVLÊ†ëÊòØÂ∏¶ÊúâÂπ≥Ë°°Êù°‰ª∂ÁöÑ‰∫åÂèâÊü•ÊâæÊ†ë
- Âπ≥Ë°°Êù°‰ª∂‰∏∫ÊØè‰∏™ËäÇÁÇπÁöÑÂ∑¶Â≠êÊ†ëÂíåÂè≥Â≠êÊ†ëÁöÑÈ´òÂ∫¶ÊúÄÂ§öÂ∑Æ1ÔºàÁ©∫Ê†ëÁöÑÈ´òÂ∫¶ÂÆö‰πâ‰∏∫-1Ôºâ
{% endnote %}

Â¶ÇÊûúË¶ÅÂØπ‰∏Ä‰∏™AVLÊ†ëËøõË°åÊèíÂÖ•Êìç‰ΩúÔºåÈúÄË¶ÅÊõ¥Êñ∞ÈÄöÂêëÊ†πËäÇÁÇπË∑ØÂæÑ‰∏äÈÇ£‰∫õËäÇÁÇπÁöÑÊâÄÊúâÂπ≥Ë°°‰ø°ÊÅØÔºåËÄåÊèíÂÖ•Êìç‰ΩúÈöêÂê´ÁùÄÂõ∞ÈöæÁöÑÂéüÂõ†Âú®‰∫éÔºåÊèíÂÖ•‰∏Ä‰∏™ËäÇÁÇπÂèØËÉΩÁ†¥ÂùèAVLÊ†ëÁöÑÂπ≥Ë°°ÁâπÊÄß„ÄÇÂ¶ÇÊûúÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåÈÇ£‰πàÂèØ‰ª•ÈÄöËøá**ÊóãËΩ¨**Êù•ÊÅ¢Â§çAVLÊ†ëÁöÑÂπ≥Ë°°

{% note info %}
Âú®‰∏ÄÊ¨°ÊèíÂÖ•‰πãÂêéÔºå‰ªéÊèíÂÖ•ÁÇπÂà∞Ê†πËäÇÁÇπÁöÑË∑ØÂæÑ‰∏äÂØªÊâæÂÖ∂‰∏≠Ê∑±Â∫¶ÊúÄÊ∑±ÔºàÊàñÈ´òÂ∫¶ÊúÄÂ∞èÔºâÁöÑ‰∏çÂπ≥Ë°°ËäÇÁÇπÔºåÁß∞ËØ•ËäÇÁÇπ‰∏∫AÔºåÈÄ†Êàê‰∏çÂπ≥Ë°°ÁöÑÊèíÂÖ•ÂàÜ‰∏∫‰∏ãÈù¢ÂõõÁßçÊÉÖÂÜµÔºö
1. ÂØπAÁöÑÂ∑¶ÂÑøÂ≠êÁöÑÂ∑¶Â≠êÊ†ëËøõË°å‰∏ÄÊ¨°ÊèíÂÖ•
2. ÂØπAÁöÑÂ∑¶ÂÑøÂ≠êÁöÑÂè≥Â≠êÊ†ëËøõË°å‰∏ÄÊ¨°ÊèíÂÖ•
3. ÂØπAÁöÑÂè≥ÂÑøÂ≠êÁöÑÂ∑¶Â≠êÊ†ëËøõË°å‰∏ÄÊ¨°ÊèíÂÖ•
4. ÂØπAÁöÑÂè≥ÂÑøÂ≠êÁöÑÂè≥Â≠êÊ†ëËøõË°å‰∏ÄÊ¨°ÊèíÂÖ•
{% endnote %}

ÊÉÖÂÜµ1ÂíåÊÉÖÂÜµ4ÊòØÂÖ≥‰∫éAÁÇπÁöÑÈïúÂÉèÂØπÁß∞Ôºå‰ΩøÁî®**ÂçïÊóãËΩ¨**Êù•Â§ÑÁêÜÔºåÂéüÁêÜÂ¶Ç‰∏ãÂõæÊâÄÁ§∫

![AVL1](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/AVL1.png)
![AVL4](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/AVL4.png)

ÊÉÖÂÜµ2ÂíåÊÉÖÂÜµ3‰πüÊòØÂÖ≥‰∫éÁÇπÁöÑÈïúÂÉèÂØπÁß∞Ôºå‰ΩøÁî®**ÂèåÊóãËΩ¨**Êù•Â§ÑÁêÜÔºåÂéüÁêÜÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºå**Âõ†‰∏∫Â≠êÊ†ëBÂíåC‰∏≠Êúâ‰∏ÄÈ¢óÊØîDÊ∑±‰∏§Â±ÇÔºå‰ΩÜÊòØÊàë‰ª¨‰∏çËÉΩËÇØÂÆöÊòØÂì™‰∏ÄÈ¢óÔºåÊâÄ‰ª•Âõæ‰∏≠BÂíåCÈÉΩË¢´ÁîªÊàêÊØîD‰Ωé1.5Â±Ç**

![AVL2](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/AVL2.png)
![AVL3](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91/AVL3.png)

{% note warning %}
**ÊàëÂÆûÁé∞ÊôÆÈÄö‰∫åÂèâÊ†ëÂíåAVLÊ†ëÁöÑ‰ª£Á†Å‰π¶ÂÜôÊÄùË∑Ø‰∏çÂêåÔºåÊúÄ‰∏ªË¶ÅÁöÑÂå∫Âà´ÊòØÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÊòØÂê¶ÊúâËøîÂõûÂÄº„ÄÇÊôÆÈÄö‰∫åÂèâÊ†ëÊ≤°ÊúâÂà©Áî®ËøîÂõûÂÄºÔºåËÄåAVLÊ†ëÁöÑÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÈÉΩ‰ºöËøîÂõûÊñ∞ÁöÑAVLÊ†ëüå≤ÔºÅ**
{% endnote %}

```js
class AVLTree {
    constructor (newValue) {
        this.value = newValue
        this.left = null
        this.right = null
        this.height = 0
        this.isNode = true
    }

    static makeTree (array) {
        let tree = new AVLTree(array[0])
        array.slice(1).forEach(item => {
            tree = tree.insert(item)
        })
        return tree
    }

    insert (newNode, currentNode = this) {
        if (!newNode.isNode) {
            newNode = new AVLTree(newNode)
        }

        if (newNode.value < currentNode.value) {
            if (currentNode.left)  {
                currentNode.left = currentNode.insert(newNode, currentNode.left)
            } else {
                currentNode.left = newNode
            }
        }

        if (newNode.value > currentNode.value) {
            if (currentNode.right)  {
                currentNode.right = currentNode.insert(newNode, currentNode.right)
            } else {
                currentNode.right = newNode
            }
        }

        if (newNode.value === currentNode.value) {
            console.log(`${newNode.value} already exists`)
        }

        currentNode = currentNode.balanceTree(currentNode)

        return currentNode
    }

    // Âè™Ë¶ÅÊ†ëÁöÑÁªìÊûÑÂèëÁîüÊîπÂèòÂ∞±Ë¶ÅËß¶ÂèëËøô‰∏™ÂáΩÊï∞
    // Ë¥üË¥£‰øùÊåÅÊ†ëÁöÑÂπ≥Ë°°ÂíåÊõ¥Êñ∞ËäÇÁÇπÁöÑÈ´òÂ∫¶‰ø°ÊÅØ
    balanceTree (currentNode) {
        function getTreeHeight (currentNode) {
            if (!currentNode) {
                return -1
            } else {
                return currentNode.height
            }
        }

        function rotateWithLeftChild (currentNode) {
            let nextNode = currentNode.left

            currentNode.left = nextNode.right
            nextNode.right = currentNode

            return nextNode
        }

        function rotateWithRightChild (currentNode) {
            let nextNode = currentNode.right

            currentNode.right = nextNode.left
            nextNode.left = currentNode

            return nextNode
        }

        function doubleWithLeftChild (currentNode) {
            currentNode.left = rotateWithRightChild(currentNode.left)
            currentNode = rotateWithLeftChild(currentNode)
            return currentNode
        }

        function doubleWithRightChild (currentNode) {
            currentNode.right = rotateWithLeftChild(currentNode.right)
            currentNode = rotateWithRightChild(currentNode)
            return currentNode            
        }

        // Âú®Âà†Èô§‰∏Ä‰∏™ËäÇÁÇπÁöÑÊó∂ÂÄôÔºåÂèØËÉΩÂá∫Áé∞‰∏çÂπ≥Ë°°ËäÇÁÇπÁöÑÊüê‰∏™ÂÑøÂ≠êÊã•ÊúâÈ´òÂ∫¶Áõ∏ÂêåÁöÑ‰∏§‰∏™Â≠êÊ†ëÁöÑÊÉÖÂÜµ
        // ÊâÄ‰ª•‰∏ãÈù¢Âà§Êñ≠ÁöÑÊó∂ÂÄôÔºåÂä†‰∏ä‰∫Ü‚Äú=‚ÄùÁöÑÊÉÖÂÜµ
        if (getTreeHeight(currentNode.left) - getTreeHeight(currentNode.right) > 1) {
            if (getTreeHeight(currentNode.left.left) >= getTreeHeight(currentNode.left.right)) {
                currentNode = rotateWithLeftChild(currentNode)
            } else {
                currentNode = doubleWithLeftChild(currentNode)
            }
        }

        if (getTreeHeight(currentNode.right) - getTreeHeight(currentNode.left) > 1) {
            if (getTreeHeight(currentNode.right.right) >= getTreeHeight(currentNode.right.left)) {
                currentNode = rotateWithRightChild(currentNode)
            } else {
                currentNode = doubleWithRightChild(currentNode)
            }
        }

        function updateHeight (currentNode) {
            currentNode.height = Math.max(getTreeHeight(currentNode.left), getTreeHeight(currentNode.right)) + 1
        }

        if (currentNode.left) {
            updateHeight(currentNode.left)
        }

        if (currentNode.right) {
            updateHeight(currentNode.right)
        }

        updateHeight(currentNode)


        return currentNode
    }

    remove (inputValue, currentNode = this) {        
        if (inputValue < currentNode.value) {
            if (currentNode.left) {
                currentNode.left = currentNode.remove(inputValue, currentNode.left, currentNode, 'left')
            } else {
                console.log(`${inputValue} does not exist`)
            }
        }
        
        if (inputValue > currentNode.value) {
            if (currentNode.right) {
                currentNode.right = currentNode.remove(inputValue, currentNode.right, currentNode, 'right')
            } else {
                console.log(`${inputValue} does not exist`)
            }
        }

        if (inputValue === currentNode.value) {
            switch (true) {
                case ((!currentNode.left) && (!currentNode.right)):
                    currentNode = null
                    break

                case !currentNode.left:
                    currentNode = currentNode.right
                    break

                case !currentNode.right:
                    currentNode = currentNode.left
                    break

                case currentNode.left && currentNode.right:
                    let minValue = currentNode.right.findMin()
                    currentNode = currentNode.remove(minValue, currentNode.right, currentNode, 'right')
                    currentNode.value = minValue
                    break

                default:
                    break
            }
        }

        if (currentNode) {
            currentNode = currentNode.balanceTree(currentNode)
        }

        return currentNode
    }
}

function preOrderTraverse (node, result = '') {
    result += node.value + '  '

    if (node.left) {
        result = preOrderTraverse(node.left, result)
    }

    if (node.right) {
        result = preOrderTraverse(node.right, result)
    }

    return result
}


let array = [1, 2, 3, 4, 5, 6, 7, 16, 15],
    tree = AVLTree.makeTree(array)

console.log(preOrderTraverse(tree)) // 4  2  1  3  6  5  15  7  16

tree = tree.insert(14)
console.log(preOrderTraverse(tree)) // 4  2  1  3  7  6  5  15  14  16

tree = tree.remove(6)
console.log(preOrderTraverse(tree)) // 4  2  1  3  7  5  15  14  16

tree = tree.remove(5)
console.log(preOrderTraverse(tree)) // 4  2  1  3  15  7  14  16
```




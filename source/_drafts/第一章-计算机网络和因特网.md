---
title: 第一章 计算机网络和因特网
categories:
    - 计算机网络
    - 《计算机网络-自顶向下方法》
abbrlink: 58d1442
mathjax: true
---

# 什么是因特网

{% note info %}
因特网是一个全世界范围的网络，它是一个互联了遍及全世界的数以亿计的设备的网络。下面介绍因特网中的术语：
- **主机**或**端系统**：接入因特网的设备。
- **通信链路**：数据在因特网中传输是需要介质的吧，这个介质就是通信链路。它包括同轴电缆、铜线、光纤和无线电频谱等。不同的链路能够以不同的速率传输数据，链路的**传输速率**以**比特/秒**度量（bit/s，或bps）。
- **分组交换机**：当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段 ，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为**分组**。**分组交换机**从它的一条入通信链路接收到达的分组，并从它的一条出通信链路转发该分组。在当今的因特网中，两种最著名的交换机是**路由器**和**链路交换机**。链路交换机通常用于接入网中，而路由器通常用于网络核心中。从发送端系统到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的**路径**。
- **网络边缘**：指因特网中的端系统，它们处于因特网的最边缘。
- **网络核心**：是由因特网中的分组交换机和通信链路构成的网状网络。
- **因特网服务提供商（ISP）**：每个ISP是一个由多个分组交换机和多段通信链路组成的网络。
- **网络协议**：一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及报文发送和/或接收一条报文或其他事件所采取的动作。
{% endnote %}

# 分组交换

在各种网络应用中，端系统彼此交换**报文**。报文能够包含协议设计者需要的任何东西。为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，称之为**分组**。在源和目的之间，每个分组都通过通信链路和分组交换机传送。分组以等于该链路最大传输速率的速度在该通信链路中进行传输。因此，如果某源端系统或分组交换机经过一条链路发送一个$L$比特的分组，链路的传输速率为$R$比特/秒，则传输该分组的时间为$L/R$秒。

## 存储转发传输

多数分组交换机在链路的输入端使用**存储转发传输**机制。存储转发机制是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。

以下图为例，源有三个大小均为$L$比特分组需要通过路由器传输到目的地，链路的传输速率为$R$比特/秒。

{% note info %}
在不考虑传播时延的情况下：
1. 时刻$0$：源开始传输分组1。
2. 时刻$L/R$：源已经传输完分组1，开始传输分组2。路由器刚好接收到完整的分组1，开始将分组1向目的地传输。
3. 时刻$2L/R$：源已经传输完分组2，开始传输分组3。路由器刚好接收到完整的分组2，开始将分组2向目的地传输。目的地刚好接收到完整的分组1。
4. 时刻$3L/R$：源已经传输完分组3。路由器刚好接收到完整的分组3，开始将分组3向目的地传输。目的地刚好接收到完整的分组2。
5. 时刻$4L/R$：目的地刚好接收到完整的分组3。
{% endnote %}

![存储转发传输](https://blog-images-1258719270.cos.ap-shanghai.myqcloud.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E4%BC%A0%E8%BE%93.png)

{% note info %}
我们现在来考虑通过由$N$条速率均为$R$的链路组成的路径（所以，在源和目的地之间有$N-1$台路由器），从源到目的地发送一个分组的总体情况。应用如上相同的逻辑，我们看到端到端的时延是$d_{端到端}=N \frac{L}{R}$
{% endnote %}

## 排队时延和分组丢失

每个分组交换机有多条链路与之相连。对于每条相连的链路，该分组交换机具有一个**输出缓存**（也称为**输出队列**），它用于存储路由器准备发往那条链路的分组。该输出缓存在分组交换中起着重要的作用。如果到达的分组需要传输到某条链路，但发现该链路正忙于传输其他分组，该到达分组必须在该输出缓存中等待。因此，除了存储转发时延以外，分组还要承受输出缓存的**排队时延**。这些时延是变化的，变化程度取决于网络中的拥塞程度。因为缓存空间的大小是有限的，一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了。在此情况下，将出现**分组丢失（丢包）**，到达的分组或已排队的分组之一将被丢弃。

## 转发表和路由器选择协议

前面我们说过，路由器从与它相连的一条通信链路得到分组，将其向与它相连的另一条通信链路转发。但是该路由器怎样决定它应当向哪条链路进行转发呢？不同的计算机网络实际上是以不同的方式完成的。这里，我们简要介绍在因特网中所采用的方法。

在因特网中，每个端系统具有一个称为IP地址的地址。当源主机要向目的端系统发送一个分组时，源在该分组的首部包含了目的地的IP地址。如同邮政地址那样，该地址具有一种等级结构。当一个分组到达网络中的路由器时，路由器检查该分组的目的地址的一部分，并向一台相邻路由器转发该分组。更特别的是，每台路由器都具有一个**转发表**，用于将目的地址（或目的地址的一部分）映射成为输出链路。当某分组到达一台路由器时，路由器检查该地址，并用这个目的地址搜索其转发表，以发现适当的出链路，然后路由器将该分组导向该出链路。

# 电路交换



# 网络的网络
